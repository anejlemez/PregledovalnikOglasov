<Window x:Class="PregledovalnikOglasov.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:PregledovalnikOglasov"
        mc:Ignorable="d"
        Title="MainWindow" Height="450" Width="800">

    <!-- meni -->
    <DockPanel>
        <Menu DockPanel.Dock="Top">
            <MenuItem Header="_Datoteka">
                <MenuItem Header="Izhod" Click="MenuIzhod_Click"/>
            </MenuItem>
            <MenuItem Header="_Oglasi">
                <MenuItem Header="Dodaj statično"/>
                <MenuItem Header="Uredi statično"/>
                <Separator/>
                <MenuItem Header="Dodaj"/>
                <MenuItem Header="Uredi"/>
                <MenuItem Header="Odstrani"/>
            </MenuItem>
        </Menu>

        <!-- Glavna vsebina-->
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="320"/>
                <ColumnDefinition Width="5"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <!-- SEARCH: placed in the third column so it starts after the filter block -->
            <Grid Grid.Row="0" Grid.Column="2" Margin="0,10,10,6">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <Grid Grid.Column="0">
                    <TextBox x:Name="txtIskanje"
                             Height="32"
                             VerticalAlignment="Center"
                             VerticalContentAlignment="Center"
                             Margin="0,0,8,0"
                             Padding="6,0"/>

                    <TextBlock Text="Išči po oglasih (npr. znamka, model, letnik)"
                               VerticalAlignment="Center"
                               Margin="6,0,8,0"
                               Foreground="Gray"
                               IsHitTestVisible="False">
                        <TextBlock.Style>
                            <Style TargetType="TextBlock">
                                <Setter Property="Visibility" Value="Collapsed"/>
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding Text, ElementName=txtIskanje}" Value="">
                                        <Setter Property="Visibility" Value="Visible"/>
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </TextBlock.Style>
                    </TextBlock>
                </Grid>

                <Button x:Name="btnIšči"
                        Grid.Column="1"
                        Content="Išči"
                        Width="100"
                        Height="32"
                        VerticalAlignment="Center"
                        Click="BtnIsci_Click"/>
            </Grid>

            <!-- FILTER -->
            <Border Grid.Row="1" Grid.Column="0" Margin="10" Padding="12" 
                    BorderBrush="#DDD" BorderThickness="1" CornerRadius="8">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel x:Name="PanelFiltri" Orientation="Vertical" HorizontalAlignment="Left">
                        <StackPanel.Resources>
                            <Style TargetType="FrameworkElement">
                                <Setter Property="Margin" Value="0,0,0,10"/>
                            </Style>
                        </StackPanel.Resources>

                        <TextBlock Text="Filtri" FontSize="18" FontWeight="SemiBold" Margin="0,0,0,4"/>

                        <!-- Primer filtra: Znamka -->
                        <StackPanel>
                            <TextBlock Text="Znamka" FontWeight="SemiBold"/>
                            <ComboBox x:Name="cbZnamka" SelectedIndex="0">
                                <ComboBoxItem Content="Vse"/>
                                <ComboBoxItem Content="Audi"/>
                                <ComboBoxItem Content="BMW"/>
                                <ComboBoxItem Content="Volkswagen"/>
                                <ComboBoxItem Content="Renault"/>
                            </ComboBox>
                        </StackPanel>

                        <!-- Model -->
                        <StackPanel>
                            <TextBlock Text="Model" FontWeight="SemiBold"/>
                            <TextBox x:Name="txtModel" />
                        </StackPanel>

                        <!-- Cena -->
                        <StackPanel Orientation="Horizontal">
                            <StackPanel Width="120" Margin="0,0,8,0">
                                <TextBlock Text="Cena min (€)" FontWeight="SemiBold"/>
                                <TextBox x:Name="txtCenaMin" />
                            </StackPanel>
                            <StackPanel Width="120">
                                <TextBlock Text="Cena max (€)" FontWeight="SemiBold"/>
                                <TextBox x:Name="txtCenaMax" />
                            </StackPanel>
                        </StackPanel>

                        <!-- Prevoženi km -->
                        <StackPanel Orientation="Horizontal">
                            <StackPanel Width="120" Margin="0,0,8,0">
                                <TextBlock Text="Km min" FontWeight="SemiBold"/>
                                <TextBox x:Name="txtKmMin" />
                            </StackPanel>
                            <StackPanel Width="120">
                                <TextBlock Text="Km max" FontWeight="SemiBold"/>
                                <TextBox x:Name="txtKmMax" />
                            </StackPanel>
                        </StackPanel>

                        <!-- Dodatni checkbox filtri -->
                        <StackPanel>
                            <TextBlock Text="Dodatno" FontWeight="SemiBold"/>
                            <CheckBox x:Name="chk1" Content="1. lastnik"/>
                            <CheckBox x:Name="chk2" Content="Servisna knjiga"/>
                            <CheckBox x:Name="chk3" Content="Garažirano"/>
                        </StackPanel>

                        <Separator/>
                        <Button Content="Filtriraj" Height="32" Click="BtnFiltriraj_Click"/>
                        <Button Content="Ponastavi filtre" Height="32" Margin="0,4,0,0" Click="BtnPonastavi_Click"/>
                    </StackPanel>
                </ScrollViewer>
            </Border>

            <!-- 2c) SPLITTER -->
            <GridSplitter Grid.Column="1" Grid.Row="1" Width="5" 
                          HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
                          Background="#EEE" ResizeDirection="Columns" />

            <!-- 2d) DESNI: SEZNAM OGLASOV + PODROBNO -->
            <Grid Grid.Column="2" Grid.Row="1" Margin="10">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <!-- ListView -->
                    <ColumnDefinition Width="12"/>
                    <!-- separator -->
                    <ColumnDefinition Width="420"/>
                    <!-- podrobnosti izbranega -->
                </Grid.ColumnDefinitions>

                <!-- Seznam oglasov -->
                <Border Grid.Column="0" Padding="0" BorderBrush="#DDD" BorderThickness="1" CornerRadius="8">
                    <ListView x:Name="lvOglasi" 
                              MouseDoubleClick="lvOglasi_MouseDoubleClick"
                              SelectionChanged="lvOglasi_SelectionChanged">
                        <ListView.ItemTemplate>
                            <DataTemplate>
                                <!-- Wrap grid in a Border to provide padding (Grid has no Padding) -->
                                <Border Padding="8">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        <TextBlock Text="{Binding Naziv}" FontWeight="SemiBold" Grid.Column="0"/>
                                        <TextBlock Text="{Binding CenaString}" Foreground="Gray" Grid.Column="1" Margin="12,0,0,0"/>
                                    </Grid>
                                </Border>
                            </DataTemplate>
                        </ListView.ItemTemplate>
                    </ListView>
                </Border>

                <!-- vizualni separator -->
                <Rectangle Grid.Column="1" Width="12" Fill="Transparent"/>

                <!-- Podrobnosti izbranega oglasa -->
                <Border Grid.Column="2" Padding="12" BorderBrush="#DDD" BorderThickness="1" CornerRadius="8">
                    <DockPanel LastChildFill="True">
                        <TextBlock Text="Podrobnosti" FontSize="18" FontWeight="SemiBold" DockPanel.Dock="Top" Margin="0,0,0,8"/>
                        <StackPanel Orientation="Vertical">
                            <StackPanel.Resources>
                                <Style TargetType="FrameworkElement">
                                    <Setter Property="Margin" Value="0,0,0,8"/>
                                </Style>
                            </StackPanel.Resources>

                            <Image x:Name="imgVozilo" Height="220" Stretch="Uniform" Source="Images/placeholder.jpg"/>
                            <TextBox x:Name="txtNaziv" FontSize="16" FontWeight="SemiBold" VerticalContentAlignment="Center"/>
                            <Label x:Name="lblCena" Content="Cena: -" />
                            <Label x:Name="lblLetnik" Content="Letnik: -" />
                            <Label x:Name="lblKm" Content="Prevoženi km: -" />
                            <Label x:Name="lblGorivo" Content="Gorivo: -" />
                        </StackPanel>
                    </DockPanel>
                </Border>
            </Grid>
        </Grid>
    </DockPanel>
</Window>
